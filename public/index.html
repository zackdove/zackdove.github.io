<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <link rel="icon" type="image/x-icon" href="assets/images/favicon/favicon_io/favicon.ico" />
  <title>zckd</title>
  <link rel="preload" href="assets/fonts/MaisonNeueDemiItalic/MaisonNeue-DemiBoldItalic.woff2" as="font"
    crossorigin="anonymous" />
  <link rel="preload" href="/assets/fonts/KareliaBold/KareliaWeb-Bold.eot" as="font" crossorigin="anonymous" />
  <link rel="preload" href="/assets/fonts/KareliaBold/KareliaWeb-Bold.eot?#iefix" as="font" crossorigin="anonymous" />
  <link rel="preload" href="/assets/fonts/KareliaBold/KareliaWeb-Bold.woff2" as="font" crossorigin="anonymous" />
  <link rel="preload" href="/assets/fonts/KareliaBold/KareliaWeb-Bold.woff" as="font" crossorigin="anonymous" />
  <link rel="preload" href="/assets/fonts/KareliaBold/KareliaWeb-Bold.ttf" as="font" crossorigin="anonymous" />
  <link rel="stylesheet" href="https://unpkg.com/modern-normalize@0.5.0/modern-normalize.css" />
  <link rel="stylesheet" href="css/style.css" />
  <script type="x-shader" id="psrdnoise3">

      // psrdnoise (c) Stefan Gustavson and Ian McEwan,
      // ver. 2021-12-02, published under the MIT license:
      // https://github.com/stegu/psrdnoise/
      
      vec4 permute(vec4 i) {
        vec4 im = mod(i, 289.0);
        return mod(((im*34.0)+10.0)*im, 289.0);
      }
      
      float psrdnoise(vec3 x, vec3 period, float alpha, out vec3 gradient)
      {
        const mat3 M = mat3(0.0, 1.0, 1.0, 1.0, 0.0, 1.0,  1.0, 1.0, 0.0);
        const mat3 Mi = mat3(-0.5, 0.5, 0.5, 0.5,-0.5, 0.5, 0.5, 0.5,-0.5);
        vec3 uvw = M * x;
        vec3 i0 = floor(uvw), f0 = fract(uvw);
        vec3 g_ = step(f0.xyx, f0.yzz), l_ = 1.0 - g_;
        vec3 g = vec3(l_.z, g_.xy), l = vec3(l_.xy, g_.z);
        vec3 o1 = min( g, l ), o2 = max( g, l );
        vec3 i1 = i0 + o1, i2 = i0 + o2, i3 = i0 + vec3(1.0);
        vec3 v0 = Mi * i0, v1 = Mi * i1, v2 = Mi * i2, v3 = Mi * i3;
        vec3 x0 = x - v0, x1 = x - v1, x2 = x - v2, x3 = x - v3;
        if(any(greaterThan(period, vec3(0.0)))) {
          vec4 vx = vec4(v0.x, v1.x, v2.x, v3.x);
          vec4 vy = vec4(v0.y, v1.y, v2.y, v3.y);
          vec4 vz = vec4(v0.z, v1.z, v2.z, v3.z);
          if(period.x > 0.0) vx = mod(vx, period.x);
          if(period.y > 0.0) vy = mod(vy, period.y);
          if(period.z > 0.0) vz = mod(vz, period.z);
          i0 = floor(M * vec3(vx.x, vy.x, vz.x) + 0.5);
          i1 = floor(M * vec3(vx.y, vy.y, vz.y) + 0.5);
          i2 = floor(M * vec3(vx.z, vy.z, vz.z) + 0.5);
          i3 = floor(M * vec3(vx.w, vy.w, vz.w) + 0.5);
        }
        vec4 hash = permute( permute( permute( 
            vec4(i0.z, i1.z, i2.z, i3.z ))
            + vec4(i0.y, i1.y, i2.y, i3.y ))
            + vec4(i0.x, i1.x, i2.x, i3.x ));
        vec4 theta = hash * 3.883222077;
        vec4 sz = hash * -0.006920415 + 0.996539792;
        vec4 psi = hash * 0.108705628;
        vec4 Ct = cos(theta), St = sin(theta);
        vec4 sz_prime = sqrt( 1.0 - sz*sz );
        vec4 gx, gy, gz;
        if(alpha != 0.0) {
          vec4 px = Ct * sz_prime, py = St * sz_prime, pz = sz;
          vec4 Sp = sin(psi), Cp = cos(psi), Ctp = St*Sp - Ct*Cp;
          vec4 qx = mix( Ctp*St, Sp, sz), qy = mix(-Ctp*Ct, Cp, sz);
          vec4 qz = -(py*Cp + px*Sp);
          vec4 Sa = vec4(sin(alpha)), Ca = vec4(cos(alpha));
          gx = Ca*px + Sa*qx; gy = Ca*py + Sa*qy; gz = Ca*pz + Sa*qz;
        }
        else {
          gx = Ct * sz_prime; gy = St * sz_prime; gz = sz;  
        }
        vec3 g0 = vec3(gx.x, gy.x, gz.x), g1 = vec3(gx.y, gy.y, gz.y);
        vec3 g2 = vec3(gx.z, gy.z, gz.z), g3 = vec3(gx.w, gy.w, gz.w);
        vec4 w = 0.5-vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3));
        w = max(w, 0.0); vec4 w2 = w * w, w3 = w2 * w;
        vec4 gdotx = vec4(dot(g0,x0), dot(g1,x1), dot(g2,x2), dot(g3,x3));
        float n = dot(w3, gdotx);
        vec4 dw = -6.0 * w2 * gdotx;
        vec3 dn0 = w3.x * g0 + dw.x * x0;
        vec3 dn1 = w3.y * g1 + dw.y * x1;
        vec3 dn2 = w3.z * g2 + dw.z * x2;
        vec3 dn3 = w3.w * g3 + dw.w * x3;
        gradient = 39.5 * (dn0 + dn1 + dn2 + dn3);
        return 39.5 * n;
      }
      
      
  </script>
  <script type="x-shader/x-fragment" id="vertexMain">
    void main() {
              // float displacement = getNoiseAmount(position);
              vec3 displacedPosition = position + normalize(normal) * getNoiseAmount(position);
              vec3 displacedNormal = normalize(normal);
              // gen new normals
              // https://discourse.threejs.org/t/calculating-vertex-normals-after-displacement-in-the-vertex-shader/16989
              float offset = .5 / 512.;
              vec3 tangent = orthogonal(normal);
              vec3 bitangent = normalize(cross(normal, tangent));
              vec3 neighbour1 = position + tangent * offset;
              vec3 neighbour2 = position + bitangent * offset;
              vec3 displacedNeighbour1 = neighbour1 + normal * getNoiseAmount(neighbour1);
              vec3 displacedNeighbour2 = neighbour2 + normal * getNoiseAmount(neighbour2);
              // https://i.ya-webdesign.com/images/vector-normals-tangent-16.png;
              vec3 displacedTangent = displacedNeighbour1 - displacedPosition;
              vec3 displacedBitangent = displacedNeighbour2 - displacedPosition;
              // https://upload.wikimedia.org/wikipedia/commons/d/d2/Right_hand_rule_cross_product.svg
              displacedNormal = normalize(cross(displacedTangent, displacedBitangent));
              N = displacedNormal;
              </script>
</head>

<body>

  <div id="groundContainer">
    <div style="overflow: hidden; width: 1034px; height: 685px; perspective: 734.494px;">
      <div
        style="transform-style: preserve-3d; pointer-events: none; width: 1034px; height: 685px; transform: translateZ(734.494px) matrix3d(1, 0, 0, 0, 0, -1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1) translate(517px, 342.5px);">
        <div class="cssGround" draggable="false"
          style="position: absolute; pointer-events: auto; user-select: none; transform: translate(-50%, -50%) matrix3d(0.01, 0, 0, 0, 0, 0, -0.01, 0, 0, -0.01, 0, 0, 0, -3, -5, 1);">
        </div>
      </div>
    </div>
  </div>
  <canvas id="app"></canvas>

  <!-- <div id="pillArrows">
    <div id="next">
      Next
    </div>
    <div id="prev">
      Previous
    </div>
  </div> -->
  <div id="css3DContainer"></div>

  <div id="overlay">
    <div id="svgTopContainer">
      <svg id="overlayTop version="1.1" viewbox="0 0 800 100" xmlns="http://www.w3.org/2000/svg"
        preserveAspectRatio="xMaxYMid meet">
        <!-- <rect width="100%" height="100%" fill="red" /> -->
        <path d="M 60 35 H 705 l 45 45" stroke="#0000ff" stroke-width="1" fill="none" id="topLine"/>
        <circle cx="50" cy="50" r="4" fill="none" stroke="#0000ff" stroke-width="1" id="rockCircle"/>
        <circle cx="50" cy="50" r="10.5" fill="none" stroke="#0000ff" stroke-width="1" stroke-dasharray="1.0471975512" id="innerCircle"/>
        <circle cx="50" cy="50" r="18" fill="none" stroke="#0000ff" stroke-width="1" stroke-dasharray="48.171087355" id="outerCircle" stroke-linecap="round" />
        <circle cx="50" cy="50" r="18" fill="none" stroke="#0000ff" stroke-width="1" stroke-dasharray="30 80" stroke-dashoffset="20" stroke-linecap="round" id="cusp"/>
        <path d="M 150 50 h 50 l 10 -10 h 100 l 25 -25 h 50 l 2 -2 h -60 l -26 26 h -140  Z" stroke="#0000ff" stroke-width="2" fill="#0000ff" />
        <path d="M 150 50 h 50 l 10 -10 h 100 l 25 -25 h 50 l 2 -2 h -60 l -26 26 h -140  Z" stroke="#0000ff" stroke-width="2" fill="#0000ff" transform="scale(-1, 1) translate(-800, 000)"></path>/>
        <text x="400" y="28" font-size="10" text-anchor="middle" fill="#0000ff" id="topTextBack" visibility="hidden">zckdzckd</text>
        <text x="400" y="28" font-size="10" text-anchor="middle" fill="#0000ff" id="topText" visibility="hidden">∂▓5░24▒▓∆∂</text>
        <text x="400" y="27.5" font-size="8" text-anchor="middle" fill="#0000ff" id="glitchedText">生</text>
       </svg>
    </div>
    <div id="svgBottomContainer">
      <svg id="overlayBottom" version="1.1" viewbox="0 0 800 80" xmlns="http://www.w3.org/2000/svg"
        preserveAspectRatio="xMaxYMid meet">
        <!-- <rect width="100%" height="100%" fill="red" /> -->
        <path d="M 50 0 L 95 45 H 705 l 45 -45" stroke="#0000ff" stroke-width="1" fill="none" />
        <path d="M 120 120 V 30 l -10 -10 v -60" stroke="#0000ff" stroke-width="0.5" fill="none" />
        <text x="118" y="-20" font-size="6" text-anchor="middle" fill="#0000ff">31</text>
        <text x="118" y="-10" font-size="6" text-anchor="middle" fill="#0000ff">41</text>
        <text x="118" y="0" font-size="6" text-anchor="middle" fill="#0000ff">59</text>
        <path d="M 450 50 h 30 l 20 -20 h 45 v 20 h 32 l 10 10 h 15 l 24 -24 h 30 l 3 3 h -25 l -25 25 h -23 l -5 -5 h -45 v -25 h -20 l -20 20 h -40 Z" stroke="#0000ff" stroke-width="0" fill="#0000ff" />
        <line x1="550" y1="34" x2="551.5" y2="34" stroke="#0000ff"  stroke-width="2" />
        <line x1="553" y1="34" x2="554.5" y2="34" stroke="#0000ff"  stroke-width="2" />
        <line x1="556" y1="34" x2="557.5" y2="34" stroke="#0000ff"  stroke-width="2" />
        <text x="594" y="57" font-size="7" text-anchor="middle" fill="#0000ff">∂</text>
      </svg>
    </div>
  </div>

  <script src="app.js"></script>

</body>

</html>